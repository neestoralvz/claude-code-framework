<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universal Mandate Monitor Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #ffffff;
            min-height: 100vh;
            padding: 20px;
        }

        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 30px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 20px;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ffd700, #ffed4a);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle {
            font-size: 1.2rem;
            opacity: 0.8;
            margin-bottom: 10px;
        }

        .status-bar {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
        }

        .status-item {
            text-align: center;
        }

        .status-item .value {
            font-size: 2rem;
            font-weight: bold;
            display: block;
        }

        .status-item .label {
            font-size: 0.9rem;
            opacity: 0.7;
            margin-top: 5px;
        }

        .clusters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .cluster-card {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 25px;
            border-left: 5px solid;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .cluster-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .cluster-card.core { border-left-color: #ff6b6b; }
        .cluster-card.research { border-left-color: #4ecdc4; }
        .cluster-card.workflow { border-left-color: #45b7d1; }
        .cluster-card.intelligence { border-left-color: #f9ca24; }

        .cluster-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .cluster-title {
            font-size: 1.3rem;
            font-weight: 600;
        }

        .cluster-status {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .status-indicator.active { background-color: #2ecc71; }
        .status-indicator.partial { background-color: #f39c12; }
        .status-indicator.inactive { background-color: #e74c3c; }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .mandate-list {
            list-style: none;
        }

        .mandate-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .mandate-item:last-child {
            border-bottom: none;
        }

        .mandate-info {
            flex: 1;
        }

        .mandate-name {
            font-weight: 500;
            margin-bottom: 5px;
        }

        .mandate-description {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        .mandate-compliance {
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 120px;
        }

        .compliance-bar {
            width: 60px;
            height: 6px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            overflow: hidden;
        }

        .compliance-fill {
            height: 100%;
            background: linear-gradient(90deg, #e74c3c 0%, #f39c12 50%, #2ecc71 100%);
            transition: width 0.5s ease;
            border-radius: 3px;
        }

        .compliance-percentage {
            font-size: 0.9rem;
            font-weight: bold;
        }

        .activity-panel {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 25px;
        }

        .activity-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .activity-title {
            font-size: 1.3rem;
            font-weight: 600;
        }

        .activity-feed {
            max-height: 300px;
            overflow-y: auto;
        }

        .activity-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-time {
            font-size: 0.8rem;
            opacity: 0.7;
            min-width: 80px;
        }

        .activity-content {
            flex: 1;
        }

        .activity-mandate {
            font-weight: 500;
            margin-bottom: 2px;
        }

        .activity-detail {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        .violation-alert {
            background: rgba(231, 76, 60, 0.2);
            border: 1px solid #e74c3c;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .violation-icon {
            color: #e74c3c;
            font-size: 1.2rem;
        }

        .refresh-button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s ease;
        }

        .refresh-button:hover {
            transform: scale(1.05);
        }

        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 50px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
            display: block;
        }

        .metric-label {
            font-size: 0.9rem;
            opacity: 0.7;
        }

        .metric-trend {
            font-size: 0.8rem;
            margin-top: 5px;
        }

        .trend-up { color: #2ecc71; }
        .trend-down { color: #e74c3c; }
        .trend-stable { color: #f39c12; }

        @media (max-width: 768px) {
            .clusters-grid {
                grid-template-columns: 1fr;
            }
            
            .status-bar {
                flex-direction: column;
                gap: 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <header class="header">
            <h1>🔄 Universal Mandate Monitor</h1>
            <div class="subtitle">Real-Time Pattern Activation Tracking</div>
            <div class="subtitle">Maximum Capability • Universal Excellence • Perpetual Optimization</div>
        </header>

        <div class="status-bar">
            <div class="status-item">
                <span class="value" id="overall-compliance">0.0%</span>
                <span class="label">Overall Compliance</span>
            </div>
            <div class="status-item">
                <span class="value" id="active-mandates">0/16</span>
                <span class="label">Active Mandates</span>
            </div>
            <div class="status-item">
                <span class="value" id="total-violations">0</span>
                <span class="label">Total Violations</span>
            </div>
            <div class="status-item">
                <span class="value" id="uptime">0s</span>
                <span class="label">System Uptime</span>
            </div>
        </div>

        <div class="metrics-grid">
            <div class="metric-card">
                <span class="metric-value" id="cluster-core-compliance">0.0%</span>
                <div class="metric-label">Core Methodology</div>
                <div class="metric-trend trend-stable" id="core-trend">● Stable</div>
            </div>
            <div class="metric-card">
                <span class="metric-value" id="cluster-research-compliance">0.0%</span>
                <div class="metric-label">Research & Preparation</div>
                <div class="metric-trend trend-stable" id="research-trend">● Stable</div>
            </div>
            <div class="metric-card">
                <span class="metric-value" id="cluster-workflow-compliance">0.0%</span>
                <div class="metric-label">Workflow Automation</div>
                <div class="metric-trend trend-stable" id="workflow-trend">● Stable</div>
            </div>
            <div class="metric-card">
                <span class="metric-value" id="cluster-intelligence-compliance">0.0%</span>
                <div class="metric-label">Intelligence Amplification</div>
                <div class="metric-trend trend-stable" id="intelligence-trend">● Stable</div>
            </div>
        </div>

        <div class="clusters-grid">
            <div class="cluster-card core">
                <div class="cluster-header">
                    <h3 class="cluster-title">Core Methodology</h3>
                    <div class="cluster-status">
                        <div class="status-indicator" id="core-status"></div>
                        <span id="core-active-count">0/4</span>
                        <button class="refresh-button" onclick="refreshCluster('core')">Refresh</button>
                    </div>
                </div>
                <ul class="mandate-list" id="core-mandates">
                    <!-- Dynamic content -->
                </ul>
            </div>

            <div class="cluster-card research">
                <div class="cluster-header">
                    <h3 class="cluster-title">Research & Preparation</h3>
                    <div class="cluster-status">
                        <div class="status-indicator" id="research-status"></div>
                        <span id="research-active-count">0/4</span>
                        <button class="refresh-button" onclick="refreshCluster('research')">Refresh</button>
                    </div>
                </div>
                <ul class="mandate-list" id="research-mandates">
                    <!-- Dynamic content -->
                </ul>
            </div>

            <div class="cluster-card workflow">
                <div class="cluster-header">
                    <h3 class="cluster-title">Workflow Automation</h3>
                    <div class="cluster-status">
                        <div class="status-indicator" id="workflow-status"></div>
                        <span id="workflow-active-count">0/4</span>
                        <button class="refresh-button" onclick="refreshCluster('workflow')">Refresh</button>
                    </div>
                </div>
                <ul class="mandate-list" id="workflow-mandates">
                    <!-- Dynamic content -->
                </ul>
            </div>

            <div class="cluster-card intelligence">
                <div class="cluster-header">
                    <h3 class="cluster-title">Intelligence Amplification</h3>
                    <div class="cluster-status">
                        <div class="status-indicator" id="intelligence-status"></div>
                        <span id="intelligence-active-count">0/4</span>
                        <button class="refresh-button" onclick="refreshCluster('intelligence')">Refresh</button>
                    </div>
                </div>
                <ul class="mandate-list" id="intelligence-mandates">
                    <!-- Dynamic content -->
                </ul>
            </div>
        </div>

        <div class="activity-panel">
            <div class="activity-header">
                <h3 class="activity-title">📈 Recent Pattern Activations</h3>
                <button class="refresh-button" onclick="refreshActivityFeed()">Refresh</button>
            </div>
            <div class="activity-feed" id="activity-feed">
                <div class="loading">
                    <div class="spinner"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class UniversalMandateMonitorWeb {
            constructor() {
                this.mandateData = {
                    // Core Methodology
                    'progressive-think': { id: 1, name: 'Progressive Think', cluster: 'core', compliance: 0, active: false },
                    'agent-deployment': { id: 2, name: 'Agent Deployment', cluster: 'core', compliance: 0, active: false },
                    'todowrite-tracking': { id: 3, name: 'TodoWrite Tracking', cluster: 'core', compliance: 0, active: false },
                    'evidence-validation': { id: 4, name: 'Evidence Validation', cluster: 'core', compliance: 0, active: false },
                    
                    // Research & Preparation
                    'context7-research': { id: 5, name: 'Context7 Research', cluster: 'research', compliance: 0, active: false },
                    'system-documentation': { id: 6, name: 'System Documentation', cluster: 'research', compliance: 0, active: false },
                    'quality-standards': { id: 7, name: 'Quality Standards', cluster: 'research', compliance: 0, active: false },
                    'pattern-documentation': { id: 8, name: 'Pattern Documentation', cluster: 'research', compliance: 0, active: false },
                    
                    // Workflow Automation
                    'git-integration': { id: 9, name: 'Git Integration', cluster: 'workflow', compliance: 0, active: false },
                    'parallel-execution': { id: 10, name: 'Parallel Execution', cluster: 'workflow', compliance: 0, active: false },
                    'session-management': { id: 11, name: 'Session Management', cluster: 'workflow', compliance: 0, active: false },
                    'framework-updates': { id: 12, name: 'Framework Updates', cluster: 'workflow', compliance: 0, active: false },
                    
                    // Intelligence Amplification
                    'personality-orchestration': { id: 13, name: 'Personality Orchestration', cluster: 'intelligence', compliance: 0, active: false },
                    'knowledge-integration': { id: 14, name: 'Knowledge Integration', cluster: 'intelligence', compliance: 0, active: false },
                    'quality-assurance': { id: 15, name: 'Quality Assurance', cluster: 'intelligence', compliance: 0, active: false },
                    'optimization-detection': { id: 16, name: 'Optimization Detection', cluster: 'intelligence', compliance: 0, active: false }
                };
                
                this.activityFeed = [];
                this.startTime = Date.now();
                
                this.init();
                this.startAutoRefresh();
                this.simulateActivity();
            }
            
            init() {
                this.renderMandates();
                this.updateDashboard();
            }
            
            renderMandates() {
                const clusters = {
                    'core': document.getElementById('core-mandates'),
                    'research': document.getElementById('research-mandates'), 
                    'workflow': document.getElementById('workflow-mandates'),
                    'intelligence': document.getElementById('intelligence-mandates')
                };
                
                Object.entries(this.mandateData).forEach(([key, mandate]) => {
                    const li = document.createElement('li');
                    li.className = 'mandate-item';
                    li.innerHTML = `
                        <div class="mandate-info">
                            <div class="mandate-name">[${mandate.id.toString().padStart(2, '0')}] ${mandate.name}</div>
                            <div class="mandate-description">${this.getMandateDescription(key)}</div>
                        </div>
                        <div class="mandate-compliance">
                            <div class="compliance-bar">
                                <div class="compliance-fill" style="width: ${mandate.compliance}%"></div>
                            </div>
                            <span class="compliance-percentage">${mandate.compliance.toFixed(1)}%</span>
                        </div>
                    `;
                    
                    if (clusters[mandate.cluster]) {
                        clusters[mandate.cluster].appendChild(li);
                    }
                });
            }
            
            getMandateDescription(key) {
                const descriptions = {
                    'progressive-think': '4-level analysis tracking (Think → Think Hard → Think Harder → Ultra Think)',
                    'agent-deployment': 'Specialized agent usage monitoring - NEVER work directly',
                    'todowrite-tracking': 'Task atomization compliance - ALL tasks broken down',
                    'evidence-validation': 'Proof requirement verification for ALL claims',
                    'context7-research': 'MANDATORY library integration before coding',
                    'system-documentation': 'Framework adherence tracking - check docs first',
                    'quality-standards': 'TDD/BDD methodology monitoring - Red-Green-Refactor',
                    'pattern-documentation': 'Discovery recording verification - document immediately',
                    'git-integration': 'Auto-commit + push behavior tracking',
                    'parallel-execution': 'Concurrent agent monitoring (MAX 10 per message)',
                    'session-management': 'RECENTER workflow activation tracking',
                    'framework-updates': 'CLAUDE.md correction tracking - immediate updates',
                    'personality-orchestration': 'Dynamic optimal adaptation monitoring - 7 personalities active',
                    'knowledge-integration': 'Framework knowledge loading - auto-load relevant info',
                    'quality-assurance': 'Excellence standards compliance - maximum quality always',
                    'optimization-detection': 'Improvement identification tracking - continuous enhancement'
                };
                return descriptions[key] || 'Universal mandate tracking';
            }
            
            updateDashboard() {
                // Calculate overall metrics
                const totalMandates = Object.keys(this.mandateData).length;
                const activeMandates = Object.values(this.mandateData).filter(m => m.active).length;
                const overallCompliance = Object.values(this.mandateData).reduce((sum, m) => sum + m.compliance, 0) / totalMandates;
                
                // Update status bar
                document.getElementById('overall-compliance').textContent = overallCompliance.toFixed(1) + '%';
                document.getElementById('active-mandates').textContent = `${activeMandates}/${totalMandates}`;
                document.getElementById('total-violations').textContent = '0'; // Placeholder
                document.getElementById('uptime').textContent = Math.floor((Date.now() - this.startTime) / 1000) + 's';
                
                // Update cluster metrics
                this.updateClusterMetrics();
                
                // Update compliance bars
                this.updateComplianceBars();
            }
            
            updateClusterMetrics() {
                const clusters = ['core', 'research', 'workflow', 'intelligence'];
                
                clusters.forEach(cluster => {
                    const clusterMandates = Object.values(this.mandateData).filter(m => m.cluster === cluster);
                    const activeMandates = clusterMandates.filter(m => m.active).length;
                    const avgCompliance = clusterMandates.reduce((sum, m) => sum + m.compliance, 0) / clusterMandates.length;
                    
                    // Update status indicator
                    const statusElement = document.getElementById(`${cluster}-status`);
                    if (activeMandates === clusterMandates.length) {
                        statusElement.className = 'status-indicator active';
                    } else if (activeMandates > clusterMandates.length / 2) {
                        statusElement.className = 'status-indicator partial';
                    } else {
                        statusElement.className = 'status-indicator inactive';
                    }
                    
                    // Update active count
                    document.getElementById(`${cluster}-active-count`).textContent = `${activeMandates}/${clusterMandates.length}`;
                    
                    // Update cluster compliance metric
                    const complianceElement = document.getElementById(`cluster-${cluster}-compliance`);
                    if (complianceElement) {
                        complianceElement.textContent = avgCompliance.toFixed(1) + '%';
                    }
                });
            }
            
            updateComplianceBars() {
                const mandateElements = document.querySelectorAll('.mandate-item');
                mandateElements.forEach(element => {
                    const mandateName = element.querySelector('.mandate-name').textContent;
                    const mandateId = mandateName.match(/\[(\d+)\]/)?.[1];
                    
                    if (mandateId) {
                        const mandate = Object.values(this.mandateData).find(m => m.id == mandateId);
                        if (mandate) {
                            const fillElement = element.querySelector('.compliance-fill');
                            const percentageElement = element.querySelector('.compliance-percentage');
                            
                            fillElement.style.width = mandate.compliance + '%';
                            percentageElement.textContent = mandate.compliance.toFixed(1) + '%';
                        }
                    }
                });
            }
            
            simulateActivity() {
                // Simulate progressive think activation
                setTimeout(() => {
                    this.activateMandate('progressive-think', 75, 'Think level 2 initiated');
                }, 2000);
                
                // Simulate agent deployment
                setTimeout(() => {
                    this.activateMandate('agent-deployment', 100, 'Testing specialist agent deployed');
                }, 4000);
                
                // Simulate todowrite tracking
                setTimeout(() => {
                    this.activateMandate('todowrite-tracking', 90, 'Task atomization completed');
                }, 6000);
                
                // Simulate context7 research
                setTimeout(() => {
                    this.activateMandate('context7-research', 85, 'Library documentation loaded');
                }, 8000);
                
                // Simulate git integration
                setTimeout(() => {
                    this.activateMandate('git-integration', 95, 'Auto-commit triggered');
                }, 10000);
                
                // Continue simulation with random activations
                setInterval(() => {
                    this.randomActivation();
                }, 5000);
            }
            
            activateMandate(mandateKey, compliance, activity) {
                if (this.mandateData[mandateKey]) {
                    this.mandateData[mandateKey].active = true;
                    this.mandateData[mandateKey].compliance = compliance;
                    
                    // Add to activity feed
                    this.activityFeed.unshift({
                        timestamp: new Date(),
                        mandate: this.mandateData[mandateKey].name,
                        cluster: this.mandateData[mandateKey].cluster,
                        activity: activity
                    });
                    
                    // Keep only last 50 activities
                    this.activityFeed = this.activityFeed.slice(0, 50);
                    
                    this.updateDashboard();
                    this.updateActivityFeed();
                }
            }
            
            randomActivation() {
                const mandateKeys = Object.keys(this.mandateData);
                const randomKey = mandateKeys[Math.floor(Math.random() * mandateKeys.length)];
                const randomCompliance = Math.min(100, this.mandateData[randomKey].compliance + Math.random() * 20);
                const activities = [
                    'Pattern activated successfully',
                    'Tracking point triggered',
                    'Compliance threshold reached',
                    'Optimization detected',
                    'Quality gate passed'
                ];
                const randomActivity = activities[Math.floor(Math.random() * activities.length)];
                
                this.activateMandate(randomKey, randomCompliance, randomActivity);
            }
            
            updateActivityFeed() {
                const feedElement = document.getElementById('activity-feed');
                feedElement.innerHTML = '';
                
                if (this.activityFeed.length === 0) {
                    feedElement.innerHTML = '<div class="loading"><div class="spinner"></div></div>';
                    return;
                }
                
                this.activityFeed.slice(0, 10).forEach(activity => {
                    const activityElement = document.createElement('div');
                    activityElement.className = 'activity-item';
                    activityElement.innerHTML = `
                        <div class="activity-time">${activity.timestamp.toLocaleTimeString()}</div>
                        <div class="activity-content">
                            <div class="activity-mandate">${activity.mandate}</div>
                            <div class="activity-detail">${activity.activity}</div>
                        </div>
                    `;
                    feedElement.appendChild(activityElement);
                });
            }
            
            startAutoRefresh() {
                setInterval(() => {
                    this.updateDashboard();
                }, 1000);
            }
        }
        
        // Global functions for button clicks
        function refreshCluster(cluster) {
            console.log(`Refreshing ${cluster} cluster...`);
            // Add refresh logic here
        }
        
        function refreshActivityFeed() {
            console.log('Refreshing activity feed...');
            dashboard.updateActivityFeed();
        }
        
        // Initialize dashboard when page loads
        let dashboard;
        document.addEventListener('DOMContentLoaded', function() {
            dashboard = new UniversalMandateMonitorWeb();
        });
    </script>
</body>
</html>